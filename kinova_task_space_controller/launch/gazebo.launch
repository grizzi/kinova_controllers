<?xml version="1.0" encoding="utf-8"?>

<launch>

    <!-- GAZEBO ARGUMENTS -->
    <arg name="headless"                              default="false"/>
    <arg name="model_path"                            default="$(find gazebo_ros)/.."/>
    <arg name="world"                                 default="empty"/>
    <arg name="world_file"                            default="$(find gazebo_ros)/worlds/$(arg world).world"/>
    <arg name="x"                                     default="0.0"/>
    <arg name="y"                                     default="0.0"/>
    <arg name="z"                                     default="0.0"/>
    <arg name="roll"                                  default="0.0"/>
    <arg name="pitch"                                 default="0.0"/>
    <arg name="yaw"                                   default="0.0"/>
    <arg name="paused"                                default="false"/>
    <arg name="use_sim_time"                          default="true"/>
    <arg name="debug"                                 default="false"/>
    <arg name="verbose"                               default="false"/>
    <arg name="mesh"                                  default="true"/>
    <arg name="run_gui"                               default="true"/>

    <!-- Path of robot description -->
    <arg name="description_file"            default="$(find kinova_task_space_controller)/urdf/gen3_standalone.urdf.xacro"/>

    <!-- Load robot description for gazebo -->
    <param name="robot_description" command="$(find xacro)/xacro.py $(arg description_file) simulation:=true"/>
    <!--param name="gazebo_ros_control" type="yaml" textfile="$(find kinova_task_space_controller)/config/gazebo_pid.yaml" /-->


    <!-- Load Gazebo world -->
    <include file="$(find gazebo_ros)/launch/empty_world.launch">
        <env name="GAZEBO_MODEL_PATH" value="$(arg model_path)"/>
        <arg name="world_name"        value="$(arg world_file)"/>
        <arg name="paused"            value="$(arg paused)"/>
        <arg name="use_sim_time"      value="$(arg use_sim_time)"/>
        <arg name="gui"               value="$(arg run_gui)"/>
        <arg name="headless"          value="$(arg headless)"/>
        <arg name="debug"             value="$(arg debug)"/>
        <arg name="verbose"           value="$(arg verbose)"/>
    </include>

    <!-- Spawn robot in Gazebo -->
    <arg name="prefix"  value="arm_"/>
    <arg name="inital_config" default="
     -J $(arg prefix)joint_1 0.0
     -J $(arg prefix)joint_2 0.0
     -J $(arg prefix)joint_3 0.0
     -J $(arg prefix)joint_4 0.0
     -J $(arg prefix)joint_5 0.0
     -J $(arg prefix)joint_6 0.0
     -J $(arg prefix)joint_7 0.0"/>
    <node name="spawn_urdf" pkg="gazebo_ros" type="spawn_model"
          args="-param /robot_description -urdf $(arg inital_config) -model kinova"
          output="screen"/>

</launch>
